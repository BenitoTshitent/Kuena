
$(document).ready(function () {

    /**
     *
     * Code pour l'inscription
     */

    $("#registerform").submit(function () {
        var nom=$("#nom").val();
        var pseudo=$("#pseudo").val();
        var numero=$("#numero").val();
        var pass1=$("#pass1").val();
        var pass2=$("#pass2").val();
        var checked=document.form.checkbox.checked;
        if(!checked){
            $("#alert-register").html('<b class="alert alert-danger">Vous devez lire et accepter les conditions d\'utilisation !</b>').fadeIn(400);
        }else {
            if(nom.trim().length==0){
                $("#alert-register").html('<b class="alert alert-danger">Le champ nom est obligatoire !</b>').fadeIn(400);
            }
            else if(pseudo.trim().length==0 || pseudo.trim().length<4){
                $("#alert-register").html('<b class="alert alert-danger">Le nom d\'utilisateur doit avoir au moins 4 caractères !</b>').fadeIn(400);
            }
            else if(numero.trim().length==0){
                $("#alert-register").html('<b class="alert alert-danger">Le champ numero est obligatoire !</b>').fadeIn(400);
            }
            else if(pass1.length<8){
                $("#alert-register").html('<b class="alert alert-danger">Le mot de passe est faible !</b>').fadeIn(400);
            }
            else if(pass1.length>0 && pass1!=pass2){
                $("#alert-register").html('<b class="alert alert-danger">Les deux mots de passe sont différents !</b>').fadeIn(400);
            }
            else{
                register(nom,pseudo,numero,pass1,pass2);
            }


        }

    });

//fonction pour l'enregistrement
    function register(nom,pseudo,numero,pass1,pass2){
        $.ajax({
            type:"post",
            url:"controls/register.in.php",
            data:{
                'nom':nom,
                'pseudo':pseudo,
                'numero':numero,
                'pass1':pass1,
                'pass2':pass2,
            },
            success:function(data){
                if(data=='success'){
                    setTimeout('window.location.href= "index.php?p=info&msg=4";');
                }
                else{
                    $("#alert-register").html(data);
                }
            }

        });
    }
});
